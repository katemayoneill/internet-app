<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Weather Packer â€“ Smart Travel Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Vue 3 (CDN) -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <!-- Styles -->
<!--   <link rel="stylesheet" href="style.css" /> -->
</head>
<body>
  <div id="app">
    <h1>Weather Packer</h1>

    <!-- Search -->
    <div class="search-bar">
      <input
        v-model="city"
        @keyup.enter="loadWeather"
        placeholder="Enter city (e.g., Dublin, Paris, Tokyo)"
        style="flex:1;"
      />
      <button @click="loadWeather" :disabled="loading">
        {{ loading ? 'Loadingâ€¦' : 'Get Forecast' }}
      </button>
    </div>

    <!-- Errors -->
    <div v-if="error" class="error-box">
      âŒ {{ error }}
    </div>

    <!-- Result -->
    <div v-if="result">
      <!-- Summary -->
      <div class="summary-grid">
        <div class="card card-blue">
          <strong>Rain Check</strong>
          <p v-if="bringUmbrella">â˜” Bring an umbrella!</p>
          <p v-else>No rain expected</p>
        </div>

        <div class="card card-orange">
          <strong>Pack For</strong>
          <p class="pack-level">
            <span>{{ packLevel }}</span> ({{ tempRange }} Â°C)
          </p>
        </div>

        <div class="card card-green">
          <strong>Air Quality</strong>
          <p v-if="airWarning">âš ï¸ {{ airWarning }}</p>
          <p v-else>Good âœ“</p>
        </div>
      </div>

      <!-- Table -->
      <h2 class="forecast-title">3-Day Forecast</h2>
      <table>
        <thead>
          <tr>
            <th>Day</th>
            <th>Temp (Â°C)</th>
            <th>Wind (km/h)</th>
            <th>Rain (mm)</th>
            <th>Conditions</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="d in days" :key="d.dt">
            <td>{{ formatDate(d.dt) }}</td>
            <td>{{ d.main.temp.toFixed(1) }}</td>
            <td>{{ (d.wind.speed * 3.6).toFixed(1) }}</td>
            <td>{{ (d.rain?.['3h'] || 0) }}</td>
            <td class="capitalize">{{ d.weather[0].description }}</td>
          </tr>
        </tbody>
      </table>

      <!-- Itinerary -->
      <div class="itinerary-section">
        <h2>Itinerary</h2>
        <button
          @click="generateItinerary"
          :disabled="generatingItinerary || !result"
          class="itinerary-button"
        >
          {{ generatingItinerary ? 'Generatingâ€¦' : 'Generate My Itinerary' }}
        </button>

        <div v-if="itinerary.length === 0 && itineraryTried" style="color:#666;">
          No itinerary yet. Click the button above.
        </div>

        <div
          v-for="day in itinerary"
          :key="day.day"
          class="itinerary-card"
        >
          <div class="itinerary-header">
            <div>
              <strong>Day {{ day.day }} â€“ {{ day.date }}</strong>
              <div style="color:#555;">
                {{ day.weather.temp }}Â°C â€¢ {{ day.weather.condition }} â€¢ ğŸ’¨
                {{ day.weather.wind }} km/h
                <span v-if="day.weather.rain > 0">
                  â€¢ ğŸŒ§ï¸ {{ day.weather.rain }} mm
                </span>
              </div>
            </div>
          </div>
          <div class="itinerary-venue">
            <p><strong>{{ day.venue.name }}</strong></p>
            <p>{{ day.venue.address }}</p>
            <p>
              Type: <span class="capitalize">{{ day.venue.type }}</span> â€¢
              <span v-if="day.venue.rating !== 'N/A'">â­ {{ day.venue.rating }}</span>
              <span v-if="day.venue.openNow !== null">
                â€¢ {{ day.venue.openNow ? 'Open now' : 'Closed' }}
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Vue App -->
  <script src="app.js"></script>
</body>
</html>
