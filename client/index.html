<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Weather Packer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Plan your trip with weather-based packing recommendations and suggested itineraries" />
  <!-- Vue 3 (CDN) -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header>
      <h1>Weather Packer</h1>
      <p class="subtitle">Weather based travel planner.</p>
    </header>

    <!-- Main Content -->
    <main>
      <!-- Search Section -->
      <section class="search-section">
        <form @submit.prevent="loadWeather" class="search-form">
          <label for="city-input" class="visually-hidden">City name</label>
          <input
            id="city-input"
            v-model="city"
            type="text"
            placeholder="please enter a city..."
            required
            :disabled="loading"
          />
          <button type="submit" :disabled="loading">
            {{ loading ? 'Loading…' : 'Get Forecast' }}
          </button>
        </form>
      </section>

      <!-- Error Message -->
      <aside v-if="error" class="error-box" role="alert">
        <span class="error-icon" aria-hidden="true">Error:</span>
        <span>{{ error }}</span>
      </aside>

      <!-- Results -->
      <div v-if="result" class="results">
        <!-- Summary Cards -->
        <section class="summary-section">
          <h2 class="visually-hidden">Travel Summary</h2>
          <div class="summary-grid">
            <article class="card card-rain">
              <h3>Rain Check</h3>
              <p v-if="bringUmbrella">Bring an umbrella!</p>
              <p v-else>No rain expected</p>
            </article>

            <article class="card card-temp">
              <h3>Pack For</h3>
              <p class="pack-level">
                <strong>{{ packLevel }}</strong>
                <span class="temp-range">{{ tempRange }} °C</span>
              </p>
            </article>

            <article class="card card-air">
              <h3>Air Quality</h3>
              <p v-if="airWarning" class="air-warning">
                <span aria-hidden="true">Warning: </span>
                <span class="warning-text">{{ airWarning }}</span>
              </p>
              <p v-else>Good</p>
            </article>
          </div>
        </section>

        <!-- 3-Day Forecast Table -->
        <section class="forecast-section">
          <h2>3-Day Forecast Summary</h2>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th scope="col">Day</th>
                  <th scope="col">Temperature (°C)</th>
                  <th scope="col">Wind Speed (km/h)</th>
                  <th scope="col">Rainfall (mm)</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="day in dailySummary" :key="day.date">
                  <td data-label="Day">
                    <strong>{{ day.dayName }}</strong><br>
                    <span class="date-small">{{ day.dateFormatted }}</span>
                  </td>
                  <td data-label="Temperature">{{ day.avgTemp }}</td>
                  <td data-label="Wind Speed">{{ day.avgWind }}</td>
                  <td data-label="Rainfall">{{ day.totalRain }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Itinerary -->
        <section class="itinerary-section">
          <h2>Suggested Itinerary</h2>
          <p class="section-description">Weather-tailored venue recommendations for your trip</p>

          <button
            @click="generateItinerary"
            :disabled="generatingItinerary || !result"
            class="itinerary-button"
            type="button"
          >
            {{ generatingItinerary ? 'Generating…' : 'Generate My Itinerary' }}
          </button>

          <p v-if="itinerary.length === 0 && itineraryTried" class="empty-state">
            No itinerary yet. Click the button above...
          </p>

          <div v-if="itinerary.length > 0" class="itinerary-list">
            <article
              v-for="day in itinerary"
              :key="day.day"
              class="itinerary-card"
            >
              <header class="itinerary-header">
                <h3>Day {{ day.day }} – {{ day.date }}</h3>
                <dl class="weather-details">
                  <div class="weather-item">
                    <dt class="visually-hidden">Temperature</dt>
                    <dd>{{ day.weather.temp }}°C</dd>
                  </div>
                  <div class="weather-item">
                    <dt class="visually-hidden">Condition</dt>
                    <dd>{{ day.weather.condition }}</dd>
                  </div>
                  <div class="weather-item">
                    <dt class="visually-hidden">Wind</dt>
                    <dd>Wind: {{ day.weather.wind }} km/h</dd>
                  </div>
                  <div v-if="day.weather.rain > 0" class="weather-item">
                    <dt class="visually-hidden">Rain</dt>
                    <dd>Rain: {{ day.weather.rain }} mm</dd>
                  </div>
                </dl>
              </header>
              <div class="itinerary-venue">
                <h4>{{ day.venue.name }}</h4>
                <address>{{ day.venue.address }}</address>
                <dl class="venue-details">
                  <dt>Type:</dt>
                  <dd class="capitalize">{{ day.venue.type }}</dd>
                  <dt v-if="day.venue.rating !== 'N/A'">Rating:</dt>
                  <dd v-if="day.venue.rating !== 'N/A'">{{ day.venue.rating }}/5</dd>
                  <dt v-if="day.venue.openNow !== null">Status:</dt>
                  <dd v-if="day.venue.openNow !== null">{{ day.venue.openNow ? 'Open now' : 'Closed' }}</dd>
                </dl>
              </div>
            </article>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <p>Built with Vue.js. Data from OpenWeatherMap & Google Places.</p>
    </footer>
  </div>

  <!-- Vue App -->
  <script src="app.js"></script>
</body>
</html>
